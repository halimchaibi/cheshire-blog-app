# ==========================================================================
# Blog MCP stdio Configuration
# Purpose:
#   Enable the Blog application to be exposed via MCP stdio protocol
# --------------------------------------------------------------------------
# --------------------------------------------------------------------------
# Application Information
# --------------------------------------------------------------------------
info:
  version: "1.0.0"
  name: "Blog Data Hub"
  domain: "Blog"
  organization: "Blog Corp"
  contact: "blog@example.com"
  environment: "${ENV:-development}"
  description: "Blog application providing API and MCP access to blog articles, authors, and comments."

# --------------------------------------------------------------------------
# Capability Definitions
# A capability represents a logical service exposed via REST, MCP, or GraphQL.
# --------------------------------------------------------------------------
capabilities:
  blog:
    name: blogstdio
    description: Blog stdio MCP API
    domain: blog
    exposure: stdio-mcp
    transport: stdio
    sources:
      - blog-db
    query-engine: jdbc
    actions-specification-file: blog-actions-claude.yaml
    pipelines-definition-file: blog-pipelines-claude.yaml

sources:
  blog-db:
    type: jdbc
    description: Blog DB PostgreSQL mode.
    provider: io.cheshire.source.jdbc.JdbcDataSourceProviderFactory
    schema: blog
    config:
      connection:
        url: jdbc:postgresql://localhost:5432/blog_db
        username: blog_user
        password: blog_password
        driver: org.postgresql.Driver
      auto-discover-schema: true
      pool:
        minConnections: 1
        maxConnections: 10

query-engines:
  jdbc:
    engine: io.cheshire.query.engine.jdbc.JdbcQueryEngineFactory
    sources:
      - public
      - information_schema
      - blog-db
      - plagia_buster
    config:
      defaultLimit: 100
      maxLimit: 10000
      timeoutMs: 30000

# Override exposures to enable only stdio MCP
exposures:
  stdio-mcp:
    type: mcp-stdio
    enabled: true
    binding: mcp-stdio
    execution: "sync"
    config:
      security:
        authentication:
          type: "none"

  rest-api:
    enabled: false

  streamable-mcp:
    enabled: false

transports:
  stdio:
    port: 0
    factory: io.cheshire.ServerFactory